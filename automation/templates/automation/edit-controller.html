{% extends "basic-portal.html" %}
{%load bootstrap3%}
{% block content %}
<script type="text/javascript" src="/static/js/select2.min.js"></script>
<link href="/static/css/select2.min.css" rel="stylesheet">
<script type="text/javascript">
$(document).ready(function() {
  $('select').select2();

  $('.add-task').on('click', function() {
    $.get(window.location + '/' + $('#task-selector').val(), function(data) {
      $('.add-task-details').html(data)
    })
  });
});
</script>
<h2>Edit Controller:</h2>
<form method='post'>
  {%csrf_token%}
  {%bootstrap_form form%}

  <button type="submit" class="btn btn-default">Save</button>
  <button type="submit" class="btn btn-danger" name="delete">Delete</button>
</form>
<h3>Add an Decider</h2>
<small>The deciders you add are responsible for making decisions. You'll configure the mapping of these to automators when you add a task</small>
<p>
  <select class="form-control">
    {%for decider in deciders%}
      <option value="{{decider.id}}">{{decider}}</option>
    {%endfor%}
  </select>
</p>
<h3>Add a Task</h2>
<small>You'll be prompted to configure the task after picking it</small>
<p>
  <select id="task-selector" class="form-control">
    {%for task in tasks%}
      <option value="{{task.id}}">{{task}}</option>
    {%endfor%}
  </select>
  <button type="submit" class="add-task btn btn-default">Add</button>
</p>
<div class="add-task-details">

</div>

{% endblock %}